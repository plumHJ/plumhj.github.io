<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script type="text/javascript">
		
		$(document).ready(function(){
			$("#btnConvert").click(function(){
				var str = $("#txtContent").val();
				
				//str = str.replace(/\n/gi, "\r\n");

				var lineSeperator = '\r\n';
				if(str.indexOf(lineSeperator) < 0) {
					lineSeperator = '\n';
				}

				var n = str.indexOf('{' + lineSeperator);
				var ret = str.substring(0, n + ('{' + lineSeperator).length - 1);
				str = str.substring(n + lineSeperator.length);

				var lines = str.split(lineSeperator);

				for (var i in lines) {

					var line = lines[i];
					line = line.trim();
					if(line == '') {
						ret += lineSeperator;
						continue;
					}
					var idx = line.indexOf(' ');
					if(idx < 0) continue;
					var name = line.substr(0, idx);
					var first = name.charCodeAt(0);
					if(first >= 65 && first <= 90) {
						var second = name.charCodeAt(1);
						if(!(second >= 65 && second <= 90)) {
							first += 32;
						}
					}
					name = String.fromCharCode(first) + name.substr(1);

					ret += "\t" + line + '\t`json:"' + name + '"`' + lineSeperator;
					
				}

				ret += "}";

				$("#txtContent2").val(ret)

			});
		});

	</script>
</head>

<body>

	<div>
		<h2>Go Struct Json 생성기</h2>
	</div>
	<div>
		<span>
			<textarea id="txtContent" rows="20" cols="50"></textarea>	
		</span>
		<span>
			<textarea id="txtContent2" rows="20" cols="50"></textarea>	
		</span>
	</div>
	<div>
		<button id="btnConvert" style="width:100px">변환</button>
	</div>

</body>
</html>
